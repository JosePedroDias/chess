import m from '../../../vendor/mithril.mjs';

import { CW, STROKE_WIDTH, SHOW_KEYS } from '../constants.mjs';
import { BLACK, WHITE, BLACK_S, WHITE_S } from '../colors.mjs';

export function Rook({ isWhite, id }, { pos }) {
    const fill = isWhite ? WHITE : BLACK;
    const stroke = isWhite ? WHITE_S : BLACK_S;

    const x = pos[0] * CW;
    const y = pos[1] * CW;

    return m('g.enter',
        {
            key: id,
            transform: `translate(${x}, ${y})`,
            style: `fill:${fill}; stroke:${stroke}; stroke-width:${STROKE_WIDTH}; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4`,
            onbeforeremove(vnode) {
                vnode.dom.classList.add('leave');
                return new Promise((resolve) => vnode.dom.addEventListener('animationend', resolve));
            }
        },
        [
            m('title', `${isWhite ? 'white' : 'black'} rook`),
            SHOW_KEYS && m(
                'text',
                {
                    x: 0,
                    y: 0,
                    dy: CW,
                    style: `stroke:none; fill:${fill}; font-size:7px; font-weight:600`,
                },
                id,
            ),
            m('path', {
                d: `m 22.05417,9.0099859 c -0.60965,0.0172 -1.21951,0.0757 -1.81793,0.19452 -0.16888,0.0482 -0.25291,0.22564 -0.2511,0.39088 -0.14346,1.2379001 -0.28693,2.4758001 -0.43039,3.7137101 -0.73948,5.2e-4 -1.47896,10e-4 -2.21843,0.002 -0.25219,-1.10536 -0.49615,-2.21288 -0.75348,-3.3168801 -0.0594,-0.18795 -0.26714,-0.28435 -0.45425,-0.25344 -1.04597,0.0372 -2.09513,0.2905501 -3.00988,0.8071101 -0.15116,0.10216 -0.18439,0.29903 -0.14878,0.46709 0.0966,0.96295 0.17573,1.92773 0.24174,2.88785 0.0564,0.76579 0.0973,1.54361 0.323,2.28246 0.26072,0.77288 0.84902,1.40962 1.5577,1.80036 0.33347,0.17486 0.69191,0.3742 1.08247,0.32591 0.6645,-0.09 1.3296,-0.17655 1.99635,-0.24876 0.82254,-0.0876 1.67163,-0.16255 2.50685,-0.21562 0.38054,-0.0223 0.79744,-0.0502 1.17995,-0.058 0.4391,-0.0116 0.88283,-0.003 1.31227,0.0115 0.66349,0.0167 1.32604,0.0593 1.98564,0.13335 0.64486,0.0688 1.29218,0.11546 1.93606,0.1923 0.47147,0.0605 0.94187,0.13442 1.41534,0.17628 0.28355,0.0206 0.56379,-0.0567 0.81254,-0.18978 0.71605,-0.33462 1.34991,-0.88972 1.67705,-1.61942 0.25212,-0.56493 0.32519,-1.18852 0.3862,-1.79831 0.0812,-1.10981 0.16094,-2.21287 0.26901,-3.32338 0.0101,-0.19469 0.0543,-0.3897 0.0414,-0.58432 -0.0229,-0.17942 -0.18428,-0.29341 -0.3466,-0.3408 -0.34371,-0.13628 -0.68043,-0.29184 -1.02871,-0.41553 C 29.68344,9.8369659 29.01784,9.7384559 28.354,9.7499259 c -0.17308,0.0181 -0.28784,0.17966 -0.30333,0.3441601 -0.24272,1.07231 -0.48544,2.14463 -0.72816,3.21694 -0.73852,0 -1.47704,0 -2.21557,0 -0.15264,-1.28601 -0.29732,-2.57322 -0.45493,-3.8584901 -0.0398,-0.17775 -0.21784,-0.27776 -0.39003,-0.28377 -0.72889,-0.12125 -1.46903,-0.17547 -2.20782,-0.15841 z`,
                stroke: `none`,
            }),
            m('path', {
                d: `m 22.10495,18.129806 c -0.94862,0.006 -1.89127,0.12059 -2.83266,0.22578 -1.02572,0.1127 -2.05264,0.21689 -3.07761,0.33488 -0.17639,0.0382 -0.27644,0.21681 -0.27476,0.38803 -0.46385,3.92893 -0.93135,7.85754 -1.39291,11.78667 -0.0185,0.1907 0.17015,0.35497 0.3565,0.31718 0.78072,-0.10377 1.57969,-0.1969 2.35463,-0.25755 1.10082,-0.0764 2.20625,-0.12577 3.30351,-0.15196 1.46147,-0.034 2.92385,-0.0244 4.38484,0.0254 0.40458,0.0145 0.84057,0.0337 1.2458,0.0531 0.62507,0.0348 1.251,0.0623 1.87256,0.1405 0.5953,0.0617 1.19001,0.13088 1.78568,0.18787 0.19151,0.001 0.33833,-0.19247 0.29973,-0.37703 -0.4691,-3.94422 -0.93533,-7.88888 -1.40621,-11.83282 -0.0293,-0.18633 -0.21104,-0.31068 -0.39331,-0.31057 -1.93571,-0.26552 -3.88363,-0.44719 -5.83603,-0.52668 -0.12989,-0.003 -0.25984,-0.004 -0.38976,-0.003 z`,
                stroke: `none`,
            }),
            m('path', {
                d: `m 21.84349,31.121146 c -2.24074,0.0113 -4.48415,0.11383 -6.70816,0.39609 -0.4926,0.0814 -0.97819,0.20217 -1.45979,0.33244 -0.85187,0.25596 -1.63737,0.8273 -2.02658,1.64198 -0.22395,0.48088 -0.31449,1.01171 -0.37357,1.53514 -0.0723,0.70644 -0.055,1.41798 -0.0423,2.12675 0.0208,0.17931 0.20002,0.30473 0.37567,0.28307 7.16695,-5.4e-4 14.33397,10e-4 21.50087,-8e-4 0.18843,-4e-4 0.32953,-0.18442 0.3114,-0.3663 0.0409,-0.86698 0.009,-1.7389 -0.11089,-2.59873 -0.11475,-0.73062 -0.45259,-1.44404 -1.02793,-1.92264 -0.49671,-0.42878 -1.13148,-0.64257 -1.75104,-0.82415 -0.63861,-0.17828 -1.30242,-0.22966 -1.95768,-0.31322 -1.53142,-0.17542 -3.07246,-0.25357 -4.61343,-0.27333 -0.70543,-0.0135 -1.411,-0.0186 -2.11656,-0.0163 z`,
                stroke: `none`,
            }),
            m('path', {
                d: `m 22.05104,8.7433259 c -0.64156,0.0206 -1.28534,0.0766 -1.9131,0.21286 -0.27129,0.0862 -0.42472,0.37596 -0.4222,0.64902 -0.13283,1.1458301 -0.26566,2.2916601 -0.39848,3.4374901 -0.58923,3.4e-4 -1.17845,6.9e-4 -1.76767,0.001 -0.23891,-1.04834 -0.4693,-2.09907 -0.71743,-3.1449801 -0.10018,-0.30484 -0.44477,-0.47515 -0.7524,-0.42294 -1.0861,0.0444 -2.17586,0.31282 -3.12094,0.8583501 -0.23945,0.16347 -0.3073,0.48298 -0.24957,0.75334 0.12159,1.18892 0.2015,2.38147 0.29308,3.57288 0.0554,0.60197 0.1278,1.2124 0.34331,1.78102 0.34331,0.84993 1.04781,1.52244 1.87106,1.90816 0.3356,0.17329 0.7204,0.28778 1.09933,0.21168 0.63096,-0.0852 1.25199,-0.1644 1.88537,-0.23405 0.2556,-0.0249 0.53767,-0.0563 0.80409,-0.0798 0.66466,-0.0626 1.33627,-0.11452 1.99443,-0.15233 1.05266,-0.0736 2.10937,-0.0449 3.16176,0.0175 0.72676,0.0507 1.45349,0.14156 2.17608,0.20236 0.60097,0.05 1.19638,0.14387 1.79904,0.21714 0.30312,0.0392 0.61691,0.0708 0.91357,-0.0248 0.31912,-0.0971 0.6139,-0.26249 0.89557,-0.43878 0.67575,-0.43412 1.21932,-1.09361 1.44542,-1.8708 0.25951,-0.85746 0.26702,-1.76149 0.34406,-2.64698 0.0648,-0.87085 0.14058,-1.74104 0.22501,-2.61003 0.027,-0.22449 -0.0568,-0.46076 -0.24088,-0.59816 -0.18107,-0.13956 -0.41143,-0.18597 -0.61467,-0.28434 -0.38209,-0.1634801 -0.76795,-0.3243401 -1.17695,-0.4074701 -0.53298,-0.11979 -1.08208,-0.18543 -1.62824,-0.16263 -0.28544,0.0389 -0.49024,0.30719 -0.5177,0.5838401 -0.22416,0.9907 -0.44832,1.9814 -0.67248,2.9721 -0.58844,0 -1.17688,0 -1.76532,0 -0.14438,-1.21905 -0.28026,-2.43958 -0.43365,-3.6572501 -0.0645,-0.29111 -0.35726,-0.47798 -0.64398,-0.48759 -0.73186,-0.11885 -1.4742,-0.17179 -2.21552,-0.15584 z`,
                fill: `none`,
            }),
            m('path', {
                d: `m 22.10469,18.129806 c -1.27441,0.0113 -2.53702,0.20414 -3.80313,0.32853 -0.72579,0.08 -1.45317,0.15164 -2.17745,0.24151 -0.29165,0.0662 -0.47655,0.36517 -0.4737,0.65355 -0.46398,3.92345 -0.92949,7.31349 -1.39006,11.2373 -0.0302,0.34632 0.31868,0.65503 0.65858,0.5893 0.68024,-0.0893 1.37394,-0.17248 2.04969,-0.23202 0.22274,-0.0199 0.421,-0.033 0.64643,-0.0476 2.19956,-0.14044 4.41312,-0.17894 6.62415,-0.12197 1.10037,0.0312 2.20822,0.0737 3.31248,0.16199 0.76488,0.078 1.52892,0.17184 2.29448,0.23879 0.34544,-6.6e-4 0.62083,-0.36219 0.54633,-0.69603 -0.46881,-3.94527 -0.93514,-7.35765 -1.40777,-11.30237 -0.0512,-0.30701 -0.35359,-0.52294 -0.65636,-0.52436 -1.96898,-0.26686 -3.95,-0.45445 -5.93606,-0.5255 -0.0959,-0.002 -0.19174,-10e-4 -0.28761,-10e-4 z`,
                fill: `none`,
            }),
            m('path', {
                d: `m 21.84323,30.854486 c -2.26929,0.013 -4.5418,0.11401 -6.79339,0.40689 -0.54302,0.0963 -1.08179,0.22194 -1.60884,0.38415 -0.88959,0.30699 -1.6952,0.94618 -2.0735,1.8228 -0.27964,0.66452 -0.36141,1.39211 -0.3984,2.10618 -0.0222,0.54115 -0.0152,1.08378 0.001,1.62461 0.0394,0.31532 0.3631,0.54328 0.673,0.50416 7.16515,-6.7e-4 14.33041,0.002 21.49548,-0.002 0.32367,-0.0108 0.57836,-0.33148 0.54966,-0.64766 0.0382,-0.91703 0.008,-1.8403 -0.13677,-2.74748 -0.15033,-0.81122 -0.57426,-1.58851 -1.24698,-2.08096 -0.55289,-0.41426 -1.22325,-0.62752 -1.88255,-0.80475 -0.69669,-0.16537 -1.41285,-0.2216 -2.12205,-0.30808 -1.64701,-0.17677 -3.30398,-0.23505 -4.95963,-0.25091 -0.49906,-0.006 -0.99816,-0.008 -1.49726,-0.007 z`,
                fill: `none`,
            }),
        ]
    );
}
